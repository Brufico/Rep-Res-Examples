# Example R Markdown File
## from ''Reproducible Research with R and RStudio''
### Christopher Gandrud
### 7 December 2012
-----------

```{r LoadData, include=FALSE}
#### Load data used in this document #### 
# Load devtools package
library(devtools)

# Load source_GitHubData function
source_gist("4466237")

# Load data from GitHub (http://bit.ly/V0ldsf)
## The data process used to create this data set
## is completely reproducible. For more information see:
## http://bit.ly/YnMKBG
MainData <- source_GitHubData("http://bit.ly/V0ldsf")
```

We can use use R's [googleVis](http://code.google.com/p/google-motion-charts-with-r/#Examples) package to create interactive JavaScript tables, charts, and maps. Here is an example of how to create a map with *googleVis*'s `gvisGeoMap` command. 

Let's first download some data from [GitHub](https://github.com/). See chapters 6 and 7 for details about this data as well as the [variable description page](https://github.com/christophergandrud/Rep-Res-Examples/blob/master/DataGather_Merge/MainData_VariableDescriptions.md).

## Fertilizer Consumption (kilograms per hectare of arable land) in 2003
### Data from the [World Bank](http://data.worldbank.org/indicator/AG.CON.FERT.ZS)

```{r CreategvisGeoMap, echo=FALSE, message=FALSE, results='asis'}
# Load googleVis
library(googleVis)

# Subset MainData so that it only includes 2003
SubData <- subset(MainData, year == 2003)

# Find the natural logarithm of FertilizerConsumption
SubData$LogFC <- log(SubData$FertilizerConsumption)

# Make a map of Fertilizer Consumption
FCMap <- gvisGeoMap(data = SubData,
                    locationvar = "iso2c",
                    numvar = "LogFC",
                    options = list(
                      colors = "[0xECE7F2, 0xA6BDDB, 0x2B8CBE]",
                      width = "780px",
                      height = "500px"))

# Print FCMap
print(FCMap, tag = "chart")
```

